{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/products.js","webpack:///./js/products.store.js","webpack:///./js/products.vue.js","webpack:///./node_modules/bootstrap-carousel-modal/CSSEditableProps.js","webpack:///./node_modules/bootstrap-carousel-modal/CSSTemplate.js","webpack:///./node_modules/bootstrap-carousel-modal/HTMLTemplate.js","webpack:///./node_modules/bootstrap-carousel-modal/carousel.js"],"names":["carousel","JSON_FILE_NAME","PRODUCTS_URL","productsJsonUrl","prodStore","WSIProdStore","prodVM","WSIProductsVM","fileName","pathMinusFile","location","pathname","substring","lastIndexOf","protocol","hostname","port","handleProductClick","evt","isProductImage","el","tagName","dataset","id","target","thisProduct","getProduct","imgHrefs","images","map","image","href","populate","name","show","addProdStoreToVM","productIds","forEach","addProduct","getVueProduct","mapEnterKeysToClickEvent","cardsParent","addEventListener","e","elem","key","click","addImageClickListener","addOverlayHideListener","$","on","addEscapeKeyListener","document","is","activeElement","blur","addEventListeners","getElementById","pageInit","readProducts","then","result","catch","err","alert","initPageOnWindowLoad","window","OverlayCarousel","thumbnailHoverOutline","url","products","jsonURL","groupsToObject","obj","group","fetchJSON","fileURL","fetchOptions","method","fetch","response","json","console","error","rawData","groups","reduce","Object","keys","productId","product","undefined","vueProduct","heroHref","hero","priceRange","price","vmID","priceLabel","regularPrice","salePrice","notOnSale","currencySymbol","Vue","component","props","template","data","methods","push","length","displayPrice","regular","selling","isOnSale","reg","sale","low","high","priceString","CSSEditableProps","headerPadding","headerParagraphMargin","footerPadding","thumbnailBtnPadding","thumbnailBtnMargin","thumbnailImgHeight","thumbnailImgHoverFilter","thumbnailBorder","thumbnailImgSelectedBorder","thumbnailSelectedOpacity","thumbnailSelectedFilter","CSSTemplate","HTMLTemplate","userEditsToCSSProps","editableCSSProps","JSON","parse","stringify","styleSheet","slice","carouselModal","jqCarouselModal","modalDialog","modalContent","modalHeader","pHeader","modalBody","carouselContainer","imgHero","imgOverlay","thumbnailsViewport","thumbnailImages","modalFooter","hasSmoothScrolling","getComputedStyle","scrollBehavior","applyUserEditsToCSSProps","entries","propName","value","applyCSSPropsToStyleSheet","searchStr","subStr","replace","appendHTMLTemplateToBody","div","createElement","innerHTML","body","appendChild","querySelector","completeImageFade","heroIndex","Number","index","thumbSelected","updateThumbnailsSelectedClass","scrollThumbnailsViewport","appendStyleSheetToHead","style","head","hrefs","display","imagesLoaded","aspectRatioMin","Infinity","evalLoadedImage","img","aspectRatio","width","height","paddingBottom","Math","round","String","contentAspectRatio","offsetWidth","offsetHeight","maxWidth","btnThumb","imgThumb","onload","src","hasMultipleImages","inTransition","firstThumb","displaySelectedImage","modal","thumbnailImg","animate","aspectRatioMismatch","log","changeEvt","Event","dispatchEvent","zIndex","classList","add","setTimeout","contains","remove","listenForEnterKeyOverButton","btnImg","firstChild","listenForThumbnailImageClicks","elClicked","isThumbnailImg","thumbnails","carouselIndex","cIndex","thumbIndex","viewportWidth","scrollWidth","vpStyle","vpPaddingLeft","parseFloat","paddingLeft","windowWidth","clientWidth","scrollMax","tnParent","parentElement","tnStyle","tnWidth","marginLeft","marginRight","thumbnailCenterOffset","offsetLeft","newScrollLeft","scrollLeft","timeStep","timeTotal","stepsTotal","scrollStart","scrollTotal","scrollStep","time","scroll","step","init"],"mappings":"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","file":"products.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/products.js\");\n","// products page for Williams-Sonoma Coding Challenge\nimport WSIProdStore from './products.store.js';\nimport WSIProductsVM from './products.vue.js';\nimport OverlayCarousel from\n    '../node_modules/bootstrap-carousel-modal/carousel.js';\nlet carousel;\n\nconst JSON_FILE_NAME = 'wsi-products.json';\nconst PRODUCTS_URL = productsJsonUrl(JSON_FILE_NAME);\nconst prodStore = new WSIProdStore(PRODUCTS_URL);\nconst prodVM = WSIProductsVM('productsvm');\n\n// forn the URL to the products json file\n// assumption: json file is stored in same path as web page\nfunction productsJsonUrl (fileName) {\n  const pathMinusFile = location.pathname.substring(0,\n    location.pathname.lastIndexOf('/'));\n  return `${location.protocol}//${location.hostname}:${location.port}` +\n    `${pathMinusFile}/${fileName}`;\n}\n\n// display overlay carousel when product image is clicked\nfunction handleProductClick (evt) {\n  const isProductImage = (el) =>\n    el.tagName === 'IMG' && typeof el.dataset.id !== 'undefined';\n  const target = evt.target;\n  if (isProductImage(target) === false) {\n    return;\n  }\n  const thisProduct = prodStore.getProduct(target.dataset.id);\n  const imgHrefs = thisProduct.images.map((image) => image.href);\n  carousel.populate(thisProduct.name, imgHrefs);\n  carousel.show();\n}\n\n// add all products in prodstore to Vue model\nfunction addProdStoreToVM () {\n  prodStore.productIds().forEach((id) => {\n    prodVM.addProduct(prodStore.getVueProduct(id));\n  });\n}\n\n// accessibility: listen for 'enter' key events on images and convert\n// to click\nfunction mapEnterKeysToClickEvent (cardsParent) {\n  cardsParent.addEventListener('keydown', (e) => {\n    const elem = e.target;\n    if (e.key === 'Enter' && elem.tagName === 'IMG') {\n      elem.click();\n    }\n  });\n}\n\n// in order to detect a click on any one of the card images\n// add one event listener to the parent of the product cards\nfunction addImageClickListener (cardsParent) {\n  cardsParent.addEventListener('click', handleProductClick);\n}\n\n// respond to hiding of overlay modal\nfunction addOverlayHideListener () {\n  $('#carouselModal').on('hidden.bs.modal', () => {\n    // no cleanup needed\n  });\n}\n\n// listen for escape key, then de-focus an active image\nfunction addEscapeKeyListener () {\n  document.addEventListener('keydown', (evt) => {\n    if (evt.key !== 'Escape') { return; }\n    if ($('#carouselModal').is(':visible')) { return; }\n    if (document.activeElement) {\n      document.activeElement.blur();\n    }\n  });\n}\n\n// add all of our event listeners\nfunction addEventListeners () {\n  const cardsParent = document.getElementById('products-container');\n  addImageClickListener(cardsParent);\n  mapEnterKeysToClickEvent(cardsParent);\n  addOverlayHideListener();\n  addEscapeKeyListener();\n}\n\n// initialize the page\nfunction pageInit () {\n\n  addEventListeners();\n\n  // read in products and add to Vue model\n  prodStore.readProducts()\n    .then(result => {\n      if (result !== true) {\n        throw 'unable to read products';\n      }\n      addProdStoreToVM();\n    })\n    .catch(err => alert(err)); // TODO replace alert with modal dialog\n}\n\nfunction initPageOnWindowLoad () {\n  window.addEventListener('load', () => {\n    // install the overlay carousel\n    carousel = new OverlayCarousel({\n      thumbnailHoverOutline: '2px solid dodgerblue'\n    });\n\n    pageInit();\n  });\n}\n\ninitPageOnWindowLoad();\n\nexport default pageInit;\n","/**\n * products store for Williams-Sonoma Coding Challenge\n * @param url\n * @return {{readProducts: (function(): Promise<boolean>), getVueProduct: (function(*): {heroHref: *, name: *, id: *}), getProduct: (function(*): *), productIds: (function(): string[])}}\n * @constructor\n */\nfunction WSIProdStore (url) {\n\n  let products;\n  let jsonURL = url;\n\n  // to enable effient access to a product by id,\n  // reduce `productsRaw.groups` array\n  // to object with property names of `id`\n  const groupsToObject = (obj, group) => {\n    obj[group.id] = group;\n    return obj;\n  };\n\n  // fetch a JSON file and convert to object\n  function fetchJSON (fileURL) {\n    // console.log(`fetchJSON(\"${fileURL}\")`);\n    const fetchOptions = { method: 'GET' };\n    return fetch(fileURL, fetchOptions)\n      .then(response => {\n        return response.json();\n      })\n      .catch(err => {\n        console.error('fetchJSON fetch err:', err);\n        throw err;\n      });\n  }\n\n  /**\n   * read products from JSON file\n   * @return {Promise<boolean>}\n   */\n  function readProducts () {\n    return fetchJSON(jsonURL)\n      .then(rawData => {\n        products = rawData.groups.reduce(groupsToObject, {});\n        // console.log('readProducts products:', products);\n        return true;\n      })\n      .catch(err => {\n        console.error('readProducts err:', err);\n        return false;\n      })\n  }\n\n  /**\n   * return array of product ids\n   * @return {string[]}\n   */\n  function productIds () {\n    return Object.keys(products);\n  }\n\n  /**\n   * return a single product from store\n   * @param productId\n   * @return {Object}\n   */\n  function getProduct (productId) {\n    return products[productId];\n  }\n\n  /**\n   * return product object to be consumed by Vue\n   * @param productId\n   * @return {{heroHref: *, name: *, id: *}}\n   */\n  function getVueProduct (productId) {\n    const product = products[productId];\n    if (typeof product === 'undefined') {\n      return undefined;\n    }\n    const vueProduct = {\n      id: product.id,\n      name: product.name,\n      heroHref: product.hero.href\n    };\n    if (product.priceRange) {\n      vueProduct.priceRange = product.priceRange;\n    } else if (product.price) {\n      vueProduct.price = product.price;\n    }\n    return vueProduct;\n  }\n\n  return {\n    readProducts,\n    productIds,\n    getProduct,\n    getVueProduct\n  }\n}\n\nexport default WSIProdStore;\n","/**\n * Vue app for displaying products in cards on page\n * @param {string} vmID - id of wrapper DOM element for vue model\n * @return {*}\n */\nfunction WSIProductsVM (vmID) {\n\n  const priceLabel = {\n    regularPrice: 'Regular Price ',\n    salePrice: 'Sale Price ',\n    notOnSale: 'Price ',\n    currencySymbol: '$'\n  };\n\n  Vue.component('product-img', {\n    props: ['product'],\n    template: `\n      <img\n        v-bind:src=\"product.heroHref\"\n        v-bind:data-id=\"product.id\"\n        v-bind:alt=\"product.name\"\n        class=\"card-img-top\"\n        role=\"button\"\n        tabindex=\"0\"\n      >`\n  });\n\n  Vue.component('product-name', {\n    props: ['name'],\n    template: `\n      <p class=\"card-text\" v-html=\"name\"></p>`\n  });\n\n  Vue.component('product-pricing', {\n    props: ['displayprice'],\n    template: `\n      <p class=\"card-text\" v-html=\"displayprice\"></p>`\n  })\n\n  return new Vue({\n    el: `#${vmID}`,\n    data: {\n      products: []\n    },\n\n    methods: {\n\n      addProduct: function (product) {\n        this.products.push(product);\n        return this.products.length;\n      },\n\n      displayPrice: function (product) {\n\n        const [regular, selling] = product.priceRange ?\n          [product.priceRange.regular, product.priceRange.selling] :\n          [product.price.regular, product.price.selling];\n\n        const isOnSale = (reg, sale) => {\n          return (typeof reg === 'number')\n            ? reg !== sale\n            : (reg.low !== sale.low || reg.high !== sale.high);\n        };\n\n        const priceString = (price) => {\n          return (typeof price === 'number')\n            ? `${priceLabel.currencySymbol}${price}`\n            : `${priceLabel.currencySymbol}${price.low} - $${price.high}`;\n        };\n\n        if (isOnSale(regular, selling)) {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.regularPrice}\n            ${priceString(regular)}</span><br/>\n            <span class=\"wsi-price wsi-sale\">${priceLabel.salePrice}\n            ${priceString(selling)}</span>`\n          );\n        } else {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.notOnSale}\n            ${priceString(regular)}</span>`\n          );\n        }\n      }\n    }\n  });\n}\n\nexport default WSIProductsVM;\n\n","// editable css props for carousel modal\n\nconst CSSEditableProps = {\n  headerPadding: '0.25rem 1rem',\n  headerParagraphMargin: '0',\n  footerPadding: '0 1rem',\n  thumbnailBtnPadding: '0',\n  thumbnailBtnMargin: '0 4px', /* must be in 'px' units */\n  thumbnailImgHeight: '60px',\n  thumbnailImgHoverFilter: 'brightness(90%)',\n  thumbnailBorder: 'none',\n  thumbnailImgSelectedBorder: '1px solid #888',\n  thumbnailSelectedOpacity: '60%',\n  thumbnailSelectedFilter: 'grayscale(100%) blur(1px)'\n};\n\nexport default CSSEditableProps;\n","// css template for carousel modal\n\nconst CSSTemplate = `\n    .wsi-overlay {\n    }\n    \n    .wsi-overlay.modal-dialog {\n      margin: 0 auto;\n    }\n\n    .wsi-overlay .modal-header {\n      padding: {{headerPadding}};\n    }\n\n    .wsi-overlay .modal-header p {\n      margin: {{headerParagraphMargin}};\n    }\n\n    .wsi-overlay .modal-footer {\n      padding: {{footerPadding}};\n    }\n\n    .wsi-overlay .div-thumbnails {\n      overflow-x: auto;\n      white-space: nowrap;\n      margin: 0;\n      padding: 8px 16px 12px 16px; /* padding must be 'px' */\n      background-color: transparent;\n      scroll-behavior: smooth;\n    }\n    \n    .wsi-overlay .div-thumbnails button {\n      padding: {{thumbnailBtnPadding}};\n      margin: {{thumbnailBtnMargin}};\n      background-color: transparent;\n      border: none;\n    }\n    \n    .wsi-overlay .div-thumbnails button:focus {\n      outline: 2px solid dodgerblue;\n      filter: brightness(80%);\n    }\n    \n    .wsi-overlay .div-thumbnails img {\n      height: {{thumbnailImgHeight}};\n      width: auto;\n      margin: 0;\n      border: {{thumbnailBorder}};\n    }\n    \n    .wsi-overlay .div-thumbnails img:hover {\n      filter: {{thumbnailImgHoverFilter}};\n    }\n\n    .wsi-overlay .div-thumbnails img.selected {\n      cursor: default;\n      border: {{thumbnailImgSelectedBorder}};\n      opacity: {{thumbnailSelectedOpacity}};\n      filter: {{thumbnailSelectedFilter}};\n    }\n    \n    .carousel-container {\n      margin: 0;\n      position: relative;\n      width: 100%;\n     }\n     .carousel-hero {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: auto;\n     }\n     .carousel-overlay {\n       position: absolute;\n       top: 0;\n       left: 0;\n       opacity: 0;\n       width: 100%;\n       height: auto;\n     }\n     .carousel-fade-in {\n       opacity: 1;\n       transition: opacity 1s;\n     }\n`;\n\nexport default CSSTemplate;\n","// HTML template for carousel modal - a Bootstrap modal with an image carousel\n\nconst HTMLTemplate = `\n  <div\n    id=\"carouselModal\"\n    tabindex=\"-1\"\n    class=\"modal fade\"\n    aria-modal=\"true\"\n    role=\"dialog\"\n    data-wrap=\"false\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered wsi-overlay\">\n      <div class=\"modal-content\">\n      \n        <div class=\"modal-header\">\n          <p><!-- name of product --></p>\n          <button type=\"button\"\n            data-dismiss=\"modal\"\n            aria-label=\"Close\"\n            class=\"close\"\n          >\n            <span aria-hidden=\"true\">×</span>\n          </button>\n        </div> <!-- /.modal-header -->\n        \n        <div class=\"modal-body\">\n          <div\n            id=\"carousel-container\"\n            class=\"carousel-container\"\n          >\n            <img\n              id=\"carousel-hero\"\n              class=\"carousel-hero\"\n              src=\"\"\n              alt=\"carousel hero\">\n            <img\n              id=\"carousel-overlay\"\n              class=\"carousel-overlay\"\n              alt=\"carousel overlay\"\n              data-in-transition=\"false\"\n              style=\"z-index: -1000\"\n              src=\"\"\n            >\n          </div> <!-- /.carousel-container -->\n        </div> <!-- /.modal-body -->\n\n        <div class=\"modal-footer\">\n          <div id=\"thumbnails-viewport\" class=\"div-thumbnails\"></div>\n        </div> <!-- /.modal-footer -->\n        \n      </div> <!-- /.modal-content -->\n    </div> <!-- /.modal-dialog -->\n  </div> <!-- /.modal -->\n`;\n\nexport default HTMLTemplate;\n","// carousel overlay modal with thumbnails\nimport CSSTemplate from './CSSTemplate.js';\nimport CSSEditableProps from './CSSEditableProps.js';\nimport HTMLTemplate from './HTMLTemplate.js';\n\nfunction OverlayCarousel (userEditsToCSSProps) {\n\n  // make copies of templates\n  const editableCSSProps = JSON.parse(JSON.stringify(CSSEditableProps));\n  let styleSheet = CSSTemplate.slice(0);\n\n  let carouselModal,\n    jqCarouselModal,\n    modalDialog,\n    modalContent,\n    modalHeader,\n    pHeader,\n    modalBody,\n    carouselContainer,\n    imgHero,\n    imgOverlay,\n    thumbnailsViewport,\n    thumbnailImages = [],\n    modalFooter;\n\n  // returns true if element supports smooth scrolling\n  const hasSmoothScrolling = (el) => {\n    return getComputedStyle(el).scrollBehavior === 'smooth';\n  }\n\n  // apply user edits to editable css props\n  function applyUserEditsToCSSProps () {\n    if (typeof userEditsToCSSProps === 'undefined') { return; }\n    for (const [propName, value] of Object.entries(userEditsToCSSProps)) {\n      if (typeof editableCSSProps[propName] === 'undefined') { continue; }\n      editableCSSProps[propName] = value;\n    }\n  }\n\n  // apply all css props to styleSheet\n  function applyCSSPropsToStyleSheet () {\n    for (const [propName, value] of Object.entries(editableCSSProps)) {\n      const searchStr = `{{${propName}}}`;\n      const subStr = `${value}`;\n      styleSheet = styleSheet.replace(searchStr, subStr);\n    }\n  }\n\n  // append HTML template to <body>\n  function appendHTMLTemplateToBody () {\n    const div = document.createElement('div');\n    div.id = \"carousel-modal-container\";\n    div.innerHTML = HTMLTemplate;\n    document.body.appendChild(div);\n\n    carouselModal = document.getElementById('carouselModal');\n    jqCarouselModal = $('#carouselModal');\n    modalDialog = document.querySelector('.modal-dialog');\n    modalContent = document.querySelector('.modal-content');\n    modalHeader = document.querySelector('.modal-header');\n    pHeader = carouselModal.querySelector('.modal-header p');\n    modalBody = carouselModal.querySelector('.wsi-overlay .modal-body');\n    carouselContainer = document.getElementById('carousel-container');\n    imgHero = document.getElementById('carousel-hero');\n    imgOverlay = document.getElementById('carousel-overlay');\n    thumbnailsViewport = document.getElementById('thumbnails-viewport');\n    modalFooter = carouselModal.querySelector('.modal-footer');\n\n    // set up the image fade\n    imgOverlay.addEventListener('transitionend', completeImageFade);\n\n    // react to hero image changes\n    imgHero.addEventListener('change', () => {\n      const heroIndex = Number(imgHero.dataset.index);\n\n      // set (unset) the selected class for each thumbnail image\n      const thumbSelected = updateThumbnailsSelectedClass(\n        thumbnailImages, heroIndex);\n\n      // scroll the thumbnails container\n      scrollThumbnailsViewport(thumbSelected);\n    });\n  }\n\n  // append style sheet to <head>\n  function appendStyleSheetToHead () {\n    const style = document.createElement('style');\n    style.innerHTML = styleSheet;\n    document.head.appendChild(style);\n  }\n\n  // populate overlay with name, carousel and thumbnail images\n  function populate (name, hrefs) {\n    // console.log('populate()')\n\n    // display the modal (invisibly) to obtain its dimensions\n    carouselModal.style.display = 'block';\n\n    pHeader.innerHTML = name;\n\n    // detect aspect ratio of image when it's loaded\n    let imagesLoaded = 0;\n    let aspectRatioMin = Infinity;\n    function evalLoadedImage () {\n      const img = this;\n      let aspectRatio;\n\n      imagesLoaded++;\n      if (img.width === 0 || img.height === 0) { return; }\n\n      aspectRatio = img.width / img.height;\n      img.dataset.aspectRatio = aspectRatio;\n      aspectRatioMin = (aspectRatio < aspectRatioMin)\n        ? aspectRatio : aspectRatioMin;\n\n      // console.log(`index: ${img.dataset.index}, aspectRatio: ${aspectRatio}, min: ${aspectRatioMin}`);\n\n      if (imagesLoaded < hrefs.length) { return; }\n      if (aspectRatioMin === Infinity) { return; }\n\n      // all images loaded: set the padding-bottom of container to match aspect\n      // ratio\n      carouselContainer.style.paddingBottom = Math.round(\n        1.0 / aspectRatioMin * 100\n      ) + '%';\n      carouselContainer.dataset.aspectRatio = String(aspectRatioMin);\n\n      const contentAspectRatio =\n        modalContent.offsetWidth / modalContent.offsetHeight;\n      modalDialog.style.maxWidth = `calc(${\n        Math.round(contentAspectRatio * 100)\n      }vh - 2rem)`;\n\n      // console.log(`  modalContent.offsetWidth: ${modalContent.offsetWidth}\n      //   modalContent.offsetHeight: ${modalContent.offsetHeight}\n      //   aspectRatioMin: ${aspectRatioMin}\n      //   contentAspectRatio: ${contentAspectRatio}\n      //   modalDialog.style.maxWidth: ${modalDialog.style.maxWidth}`);\n\n      // un-display the modal\n      carouselModal.style.display = \"none\";\n    }\n\n    // populate the thumbnails\n    thumbnailsViewport.innerHTML = '';\n    thumbnailImages = hrefs.map((href, index) => {\n      const btnThumb = document.createElement('button');\n      thumbnailsViewport.appendChild(btnThumb);\n\n      const imgThumb = document.createElement('img');\n      imgThumb.onload = evalLoadedImage;\n      imgThumb.dataset.index = index;\n      imgThumb.src = href;\n      btnThumb.appendChild(imgThumb);\n\n      return imgThumb;\n    });\n\n    // show thumbnails when there are multiple images\n    const hasMultipleImages = hrefs.length > 1;\n    modalFooter.style.display = hasMultipleImages ? '' : 'none';\n\n  }\n\n  // show the carousel modal\n  function show () {\n\n    imgOverlay.dataset.inTransition = \"false\";\n\n    // make the display changes *before* showing the modal\n    const firstThumb = thumbnailsViewport.querySelector('img');\n    if (firstThumb === null) {\n      console.error('no thumbnail images found');\n      return;\n    }\n    displaySelectedImage(firstThumb, false);\n\n    jqCarouselModal.modal('show');\n  }\n\n  /**\n   * display in hero image the selected thumbnail image\n   * @param {Element} thumbnailImg\n   * @param {boolean} animate - animate the hero image transition\n   */\n  function displaySelectedImage (thumbnailImg, animate = true) {\n    // console.log(`displaySelectedImage(imgIndex=${thumbnailImg.dataset.index},` +\n    // ` animate=${animate})`);\n\n    // don't change hero image if it is still in transition from an\n    // earlier change\n    if (imgOverlay.dataset.inTransition === \"true\") {\n      console.error('hero image in transition, cannot change now');\n      return;\n    }\n\n    // don't animate transition if image's aspect ratio is greater than the\n    // current hero image's\n    const aspectRatioMismatch = (img) =>\n      +(img.dataset.aspectRatio) > +(imgHero.dataset.aspectRatio);\n    if (aspectRatioMismatch(thumbnailImg)) {\n      console.log('displaySelectedImage aspect ratio mismatch, no animation');\n      animate = false;\n    }\n\n    // dispatch 'change' event to hero image, which will update thumbnails\n    imgHero.dataset.index = thumbnailImg.dataset.index;\n    const changeEvt = new Event('change');\n    imgHero.dispatchEvent(changeEvt);\n\n    imgOverlay.src = thumbnailImg.src;\n    imgOverlay.dataset.index = thumbnailImg.dataset.index;\n    imgOverlay.dataset.aspectRatio = thumbnailImg.dataset.aspectRatio;\n\n    if (animate) {\n      // bring overlay to front and fade it in\n      imgOverlay.dataset.inTransition = \"true\";\n      imgOverlay.style.zIndex = \"100\";\n      imgOverlay.classList.add('carousel-fade-in');\n    } else {\n      // just clean up without animation\n      completeImageFade();\n    }\n  }\n\n  // clean up display elements when image fade transition completes\n  function completeImageFade () {\n    // console.log('completeImageFade()');\n\n    // copy overlay image to hero image\n    imgHero.src = imgOverlay.src;\n    imgHero.dataset.index = imgOverlay.dataset.index;\n    imgHero.dataset.aspectRatio = imgOverlay.dataset.aspectRatio;\n\n    // send overlay to back and clean up (delayed to prevent flash)\n    setTimeout(() => {\n      imgOverlay.style.zIndex = \"-1000\";\n      imgOverlay.src = \"\";\n      imgOverlay.dataset.index = null;\n      imgOverlay.dataset.inTransition = \"false\";\n      imgOverlay.dataset.aspectRatio = \"0\";\n      if (imgOverlay.classList.contains('carousel-fade-in')) {\n        imgOverlay.classList.remove('carousel-fade-in');\n      }\n    }, 200);\n  }\n\n  // enter key press over thumbnail button emit thumbnail image click\n  function listenForEnterKeyOverButton () {\n    thumbnailsViewport.addEventListener('keydown', (e) => {\n      if (e.key !== 'Enter') { return; }\n      const elem = e.target;\n      if (elem.tagName !== 'BUTTON') { return; }\n      const btnImg = elem.firstChild;\n      if (!btnImg || btnImg.tagName !== 'IMG') { return; }\n      btnImg.click();\n    });\n  }\n\n  // respond to clicks on thumbnail images inside 'div-thumbnails'\n  function listenForThumbnailImageClicks () {\n    thumbnailsViewport.addEventListener('click', (evt) => {\n      const elClicked = evt.target;\n      const isThumbnailImg = (el) => el.tagName === 'IMG'\n        && typeof el.dataset.index !== 'undefined';\n      if (isThumbnailImg(elClicked) === false) { return; }\n      displaySelectedImage(elClicked);\n    });\n  }\n\n  // update the \"selected\" class of each thumbnail image\n  function updateThumbnailsSelectedClass (thumbnails, carouselIndex) {\n    const cIndex = Number(carouselIndex);\n    let thumbSelected = null;\n    thumbnails.forEach(img => {\n      const thumbIndex = +(img.dataset.index);\n      if (thumbIndex === cIndex) {\n        thumbSelected = img;\n        thumbSelected.classList.add('selected');\n        return;\n      }\n      img.classList.remove('selected');\n    });\n    return thumbSelected;\n  }\n\n  /**\n   * scroll thumbnails viewport to show `thumbnailImg` in center of window\n   * @param {Element} thumbnailImg - thumbnail's img element\n   */\n  function scrollThumbnailsViewport (thumbnailImg) {\n    if (!thumbnailImg) { return; }\n    const viewportWidth = thumbnailsViewport.scrollWidth;\n    const vpStyle = getComputedStyle(thumbnailsViewport);\n    const vpPaddingLeft = parseFloat(vpStyle.paddingLeft);\n    const windowWidth = thumbnailsViewport.clientWidth;\n    const scrollMax = viewportWidth - windowWidth;\n    const tnParent = thumbnailImg.parentElement; // thumbnailImg parent is button\n    const tnStyle = getComputedStyle(tnParent);\n    const tnWidth = tnParent.offsetWidth\n      + parseFloat(tnStyle.marginLeft) + parseFloat(tnStyle.marginRight);\n    const thumbnailCenterOffset = tnParent.offsetLeft\n      + (tnParent.offsetWidth / 2);\n\n    // console.log(`    viewportWidth: ${thumbnailsViewport.scrollWidth}\n    // vpPaddingLeft: ${vpPaddingLeft}\n    // windowWidth: ${windowWidth}\n    // scrollMax: ${scrollMax}\n    // tnParent.offsetLeft: ${tnParent.offsetLeft}\n    // tnParent.offsetWidth: ${tnParent.offsetWidth}\n    // tnWidth: ${tnWidth}\n    // thumbnailCenterOffset: ${thumbnailCenterOffset}`);\n\n    // scroll viewport to position thumbnail in center of viewport window\n    let newScrollLeft = thumbnailCenterOffset\n      - Math.round((windowWidth+tnWidth) / 2) + vpPaddingLeft;\n    if (newScrollLeft < 0) { newScrollLeft = 0; }\n    if (newScrollLeft > scrollMax) { newScrollLeft = scrollMax; }\n\n    // console.log(`  newScrollLeft: ${newScrollLeft}`);\n\n    if (hasSmoothScrolling(thumbnailsViewport)) {\n      // console.log('scrolling with Element.scrollLeft = newScrollLeft');\n      thumbnailsViewport.scrollLeft = newScrollLeft;\n    } else {\n      // simulate scroll feature with vanilla JavaScript\n      const timeStep = 20;\n      const timeTotal = 400;\n      const stepsTotal = Math.round(timeTotal/timeStep);\n      const scrollStart = thumbnailsViewport.scrollLeft;\n      const scrollTotal = newScrollLeft - scrollStart;\n      const scrollStep = Math.round(scrollTotal/stepsTotal);\n      let time = timeStep, scroll = scrollStart + scrollStep;\n\n      const step = () => {\n        if (time >= timeTotal) {\n          thumbnailsViewport.scrollLeft = newScrollLeft;\n          return;\n        }\n\n        thumbnailsViewport.scrollLeft = scroll;\n        time += timeStep;\n        scroll += scrollStep;\n        setTimeout(step, timeStep);\n      }\n\n      if (scrollTotal !== 0) { step(); }\n    }\n\n    // console.log(`after scrollLeft: ${thumbnailsViewport.scrollLeft}`);\n  }\n\n  function init () {\n    applyUserEditsToCSSProps();\n    applyCSSPropsToStyleSheet();\n    appendHTMLTemplateToBody();\n    appendStyleSheetToHead();\n    listenForThumbnailImageClicks();\n    listenForEnterKeyOverButton();\n  }\n\n  // initialize\n  init();\n\n  return {\n    populate,\n    show\n  };\n\n}\n\nexport default OverlayCarousel;\n"],"sourceRoot":""}