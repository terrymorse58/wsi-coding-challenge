{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/products.js","webpack:///./js/products.store.js","webpack:///./js/products.vue.js"],"names":["JSON_FILE_NAME","PRODUCTS_URL","productsJsonUrl","prodStore","WSIProdStore","prodVM","WSIProductsVM","fileName","pathMinusFile","location","pathname","substring","lastIndexOf","protocol","hostname","port","handleProductClick","evt","isProductImage","el","tagName","dataset","id","target","thisProduct","getProduct","showOverlay","name","images","addProdStoreToVM","productIds","forEach","addProduct","getVueProduct","mapEnterKeysToClickEvent","cardsParent","addEventListener","e","elem","key","click","addImageClickListener","addOverlayHideListener","$","on","hideOverlay","addEscapeKeyListener","document","is","activeElement","blur","addEventListeners","getElementById","pageInit","readProducts","then","result","catch","err","alert","initPageOnWindowLoad","window","url","products","jsonURL","groupsToObject","obj","group","fetchJSON","fileURL","fetchOptions","method","fetch","response","json","console","error","rawData","groups","reduce","Object","keys","productId","product","undefined","vueProduct","heroHref","hero","href","priceRange","price","vmID","overlayModalID","priceLabel","regularPrice","salePrice","notOnSale","currencySymbol","Vue","component","template","props","data","overlay","computed","overlayHasMultipleImages","length","methods","push","displayPrice","regular","selling","isOnSale","reg","sale","low","high","priceString","splice","imageProduct","index","imgVM","src","alt","$nextTick","firstItem","querySelector","classList","add","modal","focus"],"mappings":"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","file":"products.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/products.js\");\n","// products page for Williams-Sonoma Coding Challenge\nimport WSIProdStore from './products.store.js';\nimport WSIProductsVM from './products.vue.js';\n\nconst JSON_FILE_NAME = 'wsi-products.json';\nconst PRODUCTS_URL = productsJsonUrl(JSON_FILE_NAME);\nconst prodStore = new WSIProdStore(PRODUCTS_URL);\nconst prodVM = WSIProductsVM('productsvm', 'carouselModal');\n\n// forn the URL to the products json file\n// assumption: json file is stored in same path as web page\nfunction productsJsonUrl (fileName) {\n  const pathMinusFile = location.pathname.substring(0,\n    location.pathname.lastIndexOf('/'));\n  return `${location.protocol}//${location.hostname}:${location.port}` +\n    `${pathMinusFile}/${fileName}`;\n}\n\n// display overlay carousel when product image is clicked\nfunction handleProductClick (evt) {\n  const isProductImage = (el) =>\n    el.tagName === 'IMG' && typeof el.dataset.id !== 'undefined';\n  const target = evt.target;\n  if (isProductImage(target) === false) {\n    return;\n  }\n  const thisProduct = prodStore.getProduct(target.dataset.id);\n  prodVM.showOverlay(thisProduct.name, thisProduct.images);\n}\n\n// add all products in prodstore to Vue model\nfunction addProdStoreToVM () {\n  prodStore.productIds().forEach((id) => {\n    prodVM.addProduct(prodStore.getVueProduct(id));\n  });\n}\n\n// accessibility: listen for 'enter' key events on images and convert\n// to click\nfunction mapEnterKeysToClickEvent (cardsParent) {\n  cardsParent.addEventListener('keydown', (e) => {\n    const elem = e.target;\n    if (e.key === 'Enter' && elem.tagName === 'IMG') {\n      elem.click();\n    }\n  });\n}\n\n// in order to detect a click on any one of the card images\n// add one event listener to the parent of the product cards\nfunction addImageClickListener (cardsParent) {\n  cardsParent.addEventListener('click', handleProductClick);\n}\n\n// listen for hiding of overlay modal\nfunction addOverlayHideListener () {\n  $('#carouselModal').on('hidden.bs.modal', () => {\n    prodVM.hideOverlay();\n  });\n}\n\n// listen for escape key, then de-focus an active image\nfunction addEscapeKeyListener () {\n  document.addEventListener('keydown', (evt) => {\n    if (evt.key !== 'Escape') { return; }\n    if ($('#carouselModal').is(':visible')) { return; }\n    if (document.activeElement) {\n      document.activeElement.blur();\n    }\n  });\n}\n\n// add all of our event listeners\nfunction addEventListeners () {\n  const cardsParent = document.getElementById('products-container');\n  addImageClickListener(cardsParent);\n  mapEnterKeysToClickEvent(cardsParent);\n  addOverlayHideListener();\n  addEscapeKeyListener();\n}\n\n// initialize the page\nfunction pageInit () {\n  addEventListeners();\n\n  // read in products and add to Vue model\n  prodStore.readProducts()\n    .then(result => {\n      if (result !== true) {\n        throw 'unable to read products';\n      }\n      addProdStoreToVM();\n    })\n    .catch(err => alert(err)); // TODO replace alert with modal dialog\n}\n\nfunction initPageOnWindowLoad () {\n  window.addEventListener('load', () => {\n    pageInit();\n  });\n}\n\ninitPageOnWindowLoad();\n\nexport default pageInit;\n","/**\n * products store for Williams-Sonoma Coding Challenge\n * @param url\n * @return {{readProducts: (function(): Promise<boolean>), getVueProduct: (function(*): {heroHref: *, name: *, id: *}), getProduct: (function(*): *), productIds: (function(): string[])}}\n * @constructor\n */\nfunction WSIProdStore (url) {\n\n  let products;\n  let jsonURL = url;\n\n  // to enable effient access to a product by id,\n  // reduce `productsRaw.groups` array\n  // to object with property names of `id`\n  const groupsToObject = (obj, group) => {\n    obj[group.id] = group;\n    return obj;\n  };\n\n  // fetch a JSON file and convert to object\n  function fetchJSON (fileURL) {\n    // console.log(`fetchJSON(\"${fileURL}\")`);\n    const fetchOptions = { method: 'GET' };\n    return fetch(fileURL, fetchOptions)\n      .then(response => {\n        return response.json();\n      })\n      .catch(err => {\n        console.error('fetchJSON fetch err:', err);\n        throw err;\n      });\n  }\n\n  /**\n   * read products from JSON file\n   * @return {Promise<boolean>}\n   */\n  function readProducts () {\n    return fetchJSON(jsonURL)\n      .then(rawData => {\n        products = rawData.groups.reduce(groupsToObject, {});\n        // console.log('readProducts products:', products);\n        return true;\n      })\n      .catch(err => {\n        console.error('readProducts err:', err);\n        return false;\n      })\n  }\n\n  /**\n   * return array of product ids\n   * @return {string[]}\n   */\n  function productIds () {\n    return Object.keys(products);\n  }\n\n  /**\n   * return a single product from store\n   * @param productId\n   * @return {Object}\n   */\n  function getProduct (productId) {\n    return products[productId];\n  }\n\n  /**\n   * return product object to be consumed by Vue\n   * @param productId\n   * @return {{heroHref: *, name: *, id: *}}\n   */\n  function getVueProduct (productId) {\n    const product = products[productId];\n    if (typeof product === 'undefined') {\n      return undefined;\n    }\n    const vueProduct = {\n      id: product.id,\n      name: product.name,\n      heroHref: product.hero.href\n    };\n    if (product.priceRange) {\n      vueProduct.priceRange = product.priceRange;\n    } else if (product.price) {\n      vueProduct.price = product.price;\n    }\n    return vueProduct;\n  }\n\n  return {\n    readProducts,\n    productIds,\n    getProduct,\n    getVueProduct\n  }\n}\n\nexport default WSIProdStore;\n","/**\n * Vue app for displaying products with carousel image overlay\n * @param {string} vmID - id of wrapper DOM element for vue model\n * @param {string} overlayModalID - id of Bootstrap modal DOM element\n * @return {*}\n */\nfunction WSIProductsVM (vmID, overlayModalID) {\n\n  const priceLabel = {\n    regularPrice: 'Regular Price ',\n    salePrice: 'Sale Price ',\n    notOnSale: 'Price ',\n    currencySymbol: '$'\n  };\n\n  Vue.component('overlay-close-button', {\n    template: `\n      <button\n        type=\"button\"\n        class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"Close\"\n      ><span aria-hidden=\"true\">&times;</span></button>`\n  });\n\n  Vue.component('overlay-heading', {\n    props: ['overlay'],\n    template: `\n      <div class=\"modal-header\">\n        <p v-html=\"overlay.name\"></p>\n        <overlay-close-button></overlay-close-button>\n      </div>`\n  });\n\n  Vue.component('product-img', {\n    props: ['product'],\n    template: `\n      <img\n        v-bind:src=\"product.heroHref\"\n        v-bind:data-id=\"product.id\"\n        v-bind:alt=\"product.name\"\n        class=\"card-img-top\"\n        role=\"button\"\n        tabindex=\"0\"\n      >`\n  });\n\n  Vue.component('product-name', {\n    props: ['name'],\n    template: `\n      <p class=\"card-text\" v-html=\"name\"></p>`\n  });\n\n  Vue.component('product-pricing', {\n    props: ['displayprice'],\n    template: `\n      <p class=\"card-text\" v-html=\"displayprice\"></p>`\n  })\n\n  Vue.component('carousel-img', {\n    props: ['image'],\n    template: `\n      <img\n        v-bind:src=\"image.src\"\n        v-bind:alt=\"image.alt\"\n        class=\"img-fluid\"\n      >`\n  });\n\n  Vue.component('carousel-inner', {\n    props: ['images'],\n    template: `\n      <div class=\"carousel-inner\">\n        <div v-for=\"image in images\" class=\"carousel-item\">\n          <carousel-img v-bind:image=\"image\"></carousel-img>\n        </div>\n      </div>`\n  })\n\n  Vue.component('carousel-control-prev', {\n    props: ['href'],\n    template: `\n      <a\n        class=\"carousel-control-prev\"\n        v-bind:href=\"href\"\n        role=\"button\"\n        data-slide=\"prev\"\n      >\n        <span class=\"carousel-control-prev-icon\"></span>\n        <span class=\"sr-only\">Previous</span>\n      </a>`\n  });\n\n  Vue.component('carousel-control-next', {\n    props: ['href'],\n    template: `\n      <a\n        class=\"carousel-control-next\"\n        v-bind:href=\"href\"\n        role=\"button\"\n        data-slide=\"next\"\n      >\n        <span class=\"carousel-control-next-icon\"></span>\n        <span class=\"sr-only\">Next</span>\n      </a>`\n  });\n\n  return new Vue({\n    el: `#${vmID}`,\n    data: {\n      products: [],\n      overlay: {\n        name: '',\n        images: [],\n        activeElement: undefined\n      }\n    },\n\n    computed: {\n      overlayHasMultipleImages: function () {\n        return this.overlay.images.length > 1;\n      }\n    },\n\n    methods: {\n\n      addProduct: function (product) {\n        this.products.push(product);\n        return this.products.length;\n      },\n\n      displayPrice: function (product) {\n\n        const [regular, selling] = product.priceRange ?\n          [product.priceRange.regular, product.priceRange.selling] :\n          [product.price.regular, product.price.selling];\n\n        const isOnSale = (reg, sale) => {\n          return (typeof reg === 'number')\n            ? reg !== sale\n            : (reg.low !== sale.low || reg.high !== sale.high);\n        };\n\n        const priceString = (price) => {\n          return (typeof price === 'number')\n            ? `${priceLabel.currencySymbol}${price}`\n            : `${priceLabel.currencySymbol}${price.low} - $${price.high}`;\n        };\n\n        if (isOnSale(regular, selling)) {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.regularPrice}\n            ${priceString(regular)}</span><br/>\n            <span class=\"wsi-price wsi-sale\">${priceLabel.salePrice}\n            ${priceString(selling)}</span>`\n          );\n        } else {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.notOnSale}\n            ${priceString(regular)}</span>`\n          );\n        }\n      },\n\n      showOverlay: function (name, images) {\n        this.overlay.activeElement = document.activeElement;\n        this.overlay.name = name;\n        this.overlay.images.splice(0, this.overlay.images.length);\n        images.forEach((imageProduct, index) => {\n          const imgVM = {\n            src: imageProduct.href,\n            alt: name\n          };\n          this.overlay.images.push(imgVM);\n        });\n        this.$nextTick(() => {\n          // Bootstrap carousel requires one item to have 'active' class\n          // so set first carousel item to 'active'\n          const firstItem = document.querySelector('.carousel-item');\n          firstItem.classList.add('active');\n\n          // display the modal\n          $(`#${overlayModalID}`).modal('show');\n        });\n      },\n\n      hideOverlay: function () {\n        // clear the overlay data\n        this.overlay.name = '';\n        this.overlay.images.splice(0, this.overlay.images.length);\n\n        // restore focus to the formerly active element\n        if (this.overlay.activeElement) {\n          this.overlay.activeElement.focus();\n        }\n        this.overlay.activeElement = undefined;\n      }\n    }\n  });\n}\n\nexport default WSIProductsVM;\n\n"],"sourceRoot":""}