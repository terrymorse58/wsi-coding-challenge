{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/carousel/CSSEditableProps.js","webpack:///./js/carousel/CSSTemplate.js","webpack:///./js/carousel/carousel.js","webpack:///./js/carousel/htmltemplate.js","webpack:///./js/products.js","webpack:///./js/products.store.js","webpack:///./js/products.vue.js"],"names":["CSSEditableProps","maxWidth","property","value","headerPadding","headerParagraphMargin","footerPadding","thumbnailHeight","thumbnailMargin","thumbnailBorder","thumbnailHoverOutline","thumbnailSelectedOpacity","thumbnailSelectedFilter","CSSTemplate","OverlayCarousel","userEditsToCSSProps","css","slice","cssEdProps","JSON","parse","stringify","applyUserEditsToCSSProps","Object","entries","propName","applyCSSPropsToCSS","prop","searchStr","subStr","replace","appendTemplateToBody","div","document","createElement","id","innerHTML","HTMLTemplate","body","appendChild","$","on","evt","carouselIndex","Number","relatedTarget","getAttribute","thumbImgs","getAllThumbnails","thumbSelected","updateThumbnailsSelectedClass","scrollThumbnailsContainer","appendCSSToHead","style","head","populate","name","hrefs","pHeader","querySelector","carouselInner","thumbnails","forEach","href","index","carouselItem","className","classList","add","dataset","img","src","alt","imgThumb","role","footer","hasMultipleImages","length","display","show","modal","firstThumb","console","error","displaySelectedImage","listenForThumbnailClicks","thumbnailImg","imgIndex","carousel","divThumbnails","addEventListener","elClicked","target","isThumbnailImg","el","tagName","Array","from","querySelectorAll","thumbIndex","remove","thumb","divThumb","divMidpoint","Math","round","clientWidth","divScroll","scrollLeft","tStyle","window","getComputedStyle","tTotalWidth","offsetWidth","parseFloat","marginLeft","marginRight","thumbCenter","offsetLeft","centerOffset","thumbnailIsCentered","scrollAmount","sign","animate","log","scroll","init","JSON_FILE_NAME","PRODUCTS_URL","productsJsonUrl","prodStore","WSIProdStore","prodVM","WSIProductsVM","fileName","pathMinusFile","location","pathname","substring","lastIndexOf","protocol","hostname","port","handleProductClick","isProductImage","thisProduct","getProduct","imgHrefs","images","map","image","addProdStoreToVM","productIds","addProduct","getVueProduct","mapEnterKeysToClickEvent","cardsParent","e","elem","key","click","addImageClickListener","addOverlayHideListener","addEscapeKeyListener","is","activeElement","blur","addEventListeners","getElementById","pageInit","readProducts","then","result","catch","err","alert","initPageOnWindowLoad","url","products","jsonURL","groupsToObject","obj","group","fetchJSON","fileURL","fetchOptions","method","fetch","response","json","rawData","groups","reduce","keys","productId","product","undefined","vueProduct","heroHref","hero","priceRange","price","vmID","priceLabel","regularPrice","salePrice","notOnSale","currencySymbol","Vue","component","props","template","data","overlay","methods","push","displayPrice","regular","selling","isOnSale","reg","sale","low","high","priceString"],"mappings":"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","file":"products.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/products.js\");\n","// editable css props for carousel modal\n\nconst CSSEditableProps = {\n  maxWidth: {\n    property: 'max-width',\n    value: '400px'\n  },\n  headerPadding: {\n    property: 'padding',\n    value: '0.25rem 1rem'\n  },\n  headerParagraphMargin: {\n    property: 'margin',\n    value: '0'\n  },\n  footerPadding: {\n    property: 'padding',\n    value: '0 1rem'\n  },\n  thumbnailHeight: {\n    property: 'height',\n    value: '60px'\n  },\n  thumbnailMargin: {\n    property: 'margin',\n    value: '0 8px'\n  },\n  thumbnailBorder: {\n    property: 'border',\n    value: '1px solid rgba(0,0,0,.125)'\n  },\n  thumbnailHoverOutline: {\n    property: 'outline',\n    value: '2px solid #aaa'\n  },\n  thumbnailSelectedOpacity: {\n    property: 'opacity',\n    value: '50%'\n  },\n  thumbnailSelectedFilter: {\n    property: 'filter',\n    value: 'grayscale(100%) blur(1px)'\n  }\n};\n\nexport default CSSEditableProps;\n","// css template for carousel modal\n\nconst CSSTemplate = `\n    .wsi-overlay {\n      {{maxWidth}}\n    }\n\n    .wsi-overlay .modal-header {\n      {{headerPadding}}\n    }\n\n    .wsi-overlay .modal-header p {\n      {{headerParagraphMargin}}\n    }\n\n    .wsi-overlay .modal-footer {\n      {{footerPadding}}\n    }\n\n    .wsi-overlay .div-thumbnails {\n      overflow-x: auto;\n      white-space: nowrap;\n      padding: 0.5rem 0 1rem 0;\n      background-color: transparent;\n    }\n    \n    .wsi-overlay .div-thumbnails img {\n      {{thumbnailHeight}}\n      width: auto;\n      {{thumbnailMargin}}\n      {{thumbnailBorder}}\n    }\n\n    .wsi-overlay .div-thumbnails img:hover {\n      {{thumbnailHoverOutline}}\n    }\n\n    .wsi-overlay .div-thumbnails img.selected {\n      cursor: default;\n      outline: none;\n      {{thumbnailSelectedOpacity}}\n      {{thumbnailSelectedFilter}}\n    }\n`;\n\nexport default CSSTemplate;\n","// carousel overlay modal\n\nimport CSSTemplate from './CSSTemplate.js';\nimport CSSEditableProps from './CSSEditableProps.js';\nimport HTMLTemplate from './htmltemplate.js';\n\nfunction OverlayCarousel (userEditsToCSSProps) {\n\n  // console.log('OverlayCarousel userEditsToCSSProps:', userEditsToCSSProps);\n\n  let css = CSSTemplate.slice(0);\n  let cssEdProps = JSON.parse(JSON.stringify(CSSEditableProps));\n\n  // apply passed in user edits to css props\n  function applyUserEditsToCSSProps () {\n    // console.log('applyUserEditsToCSSProps()');\n    if (typeof userEditsToCSSProps === 'undefined') { return; }\n    for (const [propName, value] of Object.entries(userEditsToCSSProps)) {\n      if (typeof cssEdProps[propName] === 'undefined') { continue; }\n      cssEdProps[propName].value = value;\n    }\n  }\n\n  // apply all css props to css\n  function applyCSSPropsToCSS () {\n    for (const [propName, prop] of Object.entries(cssEdProps)) {\n      const searchStr = `{{${propName}}}`;\n      const subStr = `${prop.property}: ${prop.value};`;\n      css = css.replace(searchStr, subStr);\n    }\n  }\n\n  // append HTML template to end of <body>\n  function appendTemplateToBody () {\n    const div = document.createElement('div');\n    div.id = \"carousel-modal-container\";\n    div.innerHTML = HTMLTemplate;\n    document.body.appendChild(div);\n\n    // listen for carousel changes then update the DOM\n    $('.carousel').on('slide.bs.carousel', (evt) => {\n      const carouselIndex = Number(\n        evt.relatedTarget.getAttribute('data-index')\n      );\n\n      // get all the thumbnail images\n      const thumbImgs = getAllThumbnails();\n\n      // set (unset) the selected class for each thumbnail image\n      const thumbSelected = updateThumbnailsSelectedClass(\n        thumbImgs, carouselIndex);\n\n      // scroll the thumbnails container\n      scrollThumbnailsContainer(thumbSelected);\n    });\n  }\n\n  // append style sheet to <head>\n  function appendCSSToHead () {\n    const style = document.createElement('style');\n    style.innerHTML = css;\n    document.head.appendChild(style);\n  }\n\n  // populate overlay with name, carousel and thumbnail images\n  function populate (name, hrefs) {\n    const pHeader = document.querySelector(\n      '.wsi-overlay .modal-header p');\n    const carouselInner = document.querySelector(\n      '.wsi-overlay .carousel-inner');\n    const thumbnails = document.querySelector(\n      '.wsi-overlay .div-thumbnails');\n\n    pHeader.innerHTML = name;\n\n    // populate the carousel and the thumbnails\n    carouselInner.innerHTML = '';\n    thumbnails.innerHTML = '';\n    hrefs.forEach((href, index) => {\n      const carouselItem = document.createElement('div');\n      carouselItem.className = 'carousel-item';\n      if (index === 0) { carouselItem.classList.add('active'); }\n      carouselItem.dataset.index = index;\n      carouselInner.appendChild(carouselItem);\n\n      const img = document.createElement('img');\n      img.src = href;\n      img.alt = name;\n      img.className = 'img-fluid';\n      carouselItem.appendChild(img);\n\n      const imgThumb = document.createElement('img');\n      imgThumb.role = 'button';\n      imgThumb.dataset.index = index;\n      imgThumb.src = href;\n      thumbnails.appendChild(imgThumb);\n    });\n\n    // show thumbnails if there are multiple images\n    const footer = document.querySelector('.wsi-overlay .modal-footer');\n    const hasMultipleImages = hrefs.length > 1;\n    footer.style.display = hasMultipleImages ? '' : 'none';\n  }\n\n  // show the carousel modal\n  function show () {\n    $('#carouselModal').modal('show');\n    // mark the first thumbnail image as selected\n    const firstThumb = document.querySelector('.div-thumbnails img');\n    if (firstThumb === null) {\n      console.error('no thumbnail images found');\n      return;\n    }\n    firstThumb.classList.add('selected');\n    //display the first image\n    displaySelectedImage(firstThumb);\n\n    // listen for thumbnail clicks\n    listenForThumbnailClicks();\n  }\n\n  // display in carousel the selected thumbnail image\n  function displaySelectedImage (thumbnailImg) {\n    const imgIndex = Number(thumbnailImg.getAttribute('data-index'));\n    $('.carousel').carousel(imgIndex);\n  }\n\n  // respond to clicks on thumbnail images inside 'div-thumbnails'\n  function listenForThumbnailClicks () {\n    const divThumbnails = document.querySelector('.div-thumbnails');\n    divThumbnails.addEventListener('click', (evt) => {\n      const elClicked = evt.target;\n      const isThumbnailImg = (el) => el.tagName === 'IMG'\n        && typeof el.dataset.index !== 'undefined';\n      if (isThumbnailImg(elClicked) === false) { return; }\n      displaySelectedImage(elClicked);\n    });\n  }\n\n  // get all thumbnail images\n  function getAllThumbnails () {\n    return Array.from(\n      document.querySelectorAll('.div-thumbnails img')\n    );\n  }\n\n  // update the \"selected\" class of all thumbnails\n  function updateThumbnailsSelectedClass (thumbnails, carouselIndex) {\n    let thumbSelected = null;\n    thumbnails.forEach(img => {\n      const thumbIndex = Number(img.getAttribute('data-index'));\n      img.classList.remove('selected');\n      if (thumbIndex === carouselIndex) {\n        thumbSelected = img;\n      }\n    });\n    if (thumbSelected) {\n      thumbSelected.classList.add('selected');\n    }\n    return thumbSelected;\n  }\n\n  /**\n   * scroll the thumbnails container left or right, based on the selected\n   * thumbnail's position\n   * @param {Element} thumb\n   */\n  function scrollThumbnailsContainer (thumb) {\n    if (!thumb) { return; }\n    const divThumb = document.querySelector('.div-thumbnails');\n    const divMidpoint = Math.round(divThumb.clientWidth / 2);\n    const divScroll = divThumb.scrollLeft;\n    const tStyle = window.getComputedStyle(thumb);\n    const tTotalWidth = thumb.offsetWidth\n      + parseFloat(tStyle.marginLeft) + parseFloat(tStyle.marginRight);\n    const thumbCenter = thumb.offsetLeft + (thumb.offsetWidth / 2);\n    const centerOffset = thumbCenter - divScroll;\n\n    // if thumbnail is centered, do not scroll\n    const thumbnailIsCentered = () => {\n      return centerOffset >= divMidpoint - (tTotalWidth / 2)\n        && centerOffset <= divMidpoint + (tTotalWidth / 2);\n    };\n    if (thumbnailIsCentered()) {\n      return;\n    }\n\n    const scrollAmount = Math.sign(centerOffset - divMidpoint)\n      * tTotalWidth;\n\n    // console.log(`  divScroll: ${divScroll}, thumbCenter: ${thumbCenter}, ` +\n    // ` centerOffset: ${centerOffset}, scrollAmount: ${scrollAmount}`);\n\n    const divThumbnails = $('.div-thumbnails');\n    if (divThumbnails.animate) {\n      // console.log('scrollThumbnailsContainer using animate()');\n      divThumbnails.animate({\n        scrollLeft: divThumb.scrollLeft + scrollAmount\n      }, 500);\n    } else if (divThumbnails.scrollLeft) {\n      // console.log('scrollThumbnailsContainer using scrollLeft()');\n      divThumbnails.scrollLeft(divThumb.scrollLeft + scrollAmount);\n    } else {\n      console.log('scrollThumbnailsContainer using fallback scroll()');\n      divThumbnails.scroll(divThumb.scrollLeft + scrollAmount, 0);\n    }\n  }\n\n  function init () {\n    // console.log('carousel.js init()');\n    applyUserEditsToCSSProps();\n    applyCSSPropsToCSS();\n    appendTemplateToBody();\n    appendCSSToHead();\n  }\n\n  // initialize\n  init();\n\n  return {\n    populate,\n    show\n  };\n\n}\n\nexport default OverlayCarousel;\n","// HTML template for carousel modal\n\nconst HTMLTemplate = `\n  <div\n    id=\"carouselModal\"\n    tabindex=\"-1\"\n    class=\"modal fade\"\n    aria-modal=\"true\"\n    role=\"dialog\"\n    data-wrap=\"false\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered wsi-overlay\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\"><p><!-- name of product --></p>\n          <button type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\"\n                  class=\"close\"><span aria-hidden=\"true\">Ã—</span></button>\n        </div>\n        <div class=\"modal-body\">\n          <div\n            id=\"wsiCarousel\"\n            data-ride=\"carousel\"\n            class=\"carousel slide carousel-fade\"\n            data-interval=\"false\"\n          >\n            <div class=\"carousel-inner\">\n            <!--\n              <div class=\"carousel-item active\" data-index=\"0\">\n                <img src=\"...\" alt=\"...\" class=\"img-fluid\">\n              </div>\n            -->\n            </div>\n          </div> <!-- /.carousel -->\n        </div> <!-- /.modal-body -->\n\n        <div class=\"modal-footer\">\n          <div class=\"div-thumbnails\">\n          <!--\n            <img role=\"button\"\n              data-index=\"0\"\n              onclick=\"displaySelectedImage(this)\"\n              src=\"...\">\n          -->\n          </div>\n        </div> <!-- /.modal-footer -->\n      </div> <!-- /.modal-content -->\n    </div> <!-- /.modal-dialog -->\n  </div> <!-- /.modal -->\n`;\n\nexport default HTMLTemplate;\n","// products page for Williams-Sonoma Coding Challenge\nimport WSIProdStore from './products.store.js';\nimport WSIProductsVM from './products.vue.js';\nimport OverlayCarousel from './carousel/carousel.js';\nlet carousel;\n\nconst JSON_FILE_NAME = 'wsi-products.json';\nconst PRODUCTS_URL = productsJsonUrl(JSON_FILE_NAME);\nconst prodStore = new WSIProdStore(PRODUCTS_URL);\nconst prodVM = WSIProductsVM('productsvm');\n\n// forn the URL to the products json file\n// assumption: json file is stored in same path as web page\nfunction productsJsonUrl (fileName) {\n  const pathMinusFile = location.pathname.substring(0,\n    location.pathname.lastIndexOf('/'));\n  return `${location.protocol}//${location.hostname}:${location.port}` +\n    `${pathMinusFile}/${fileName}`;\n}\n\n// display overlay carousel when product image is clicked\nfunction handleProductClick (evt) {\n  const isProductImage = (el) =>\n    el.tagName === 'IMG' && typeof el.dataset.id !== 'undefined';\n  const target = evt.target;\n  if (isProductImage(target) === false) {\n    return;\n  }\n  const thisProduct = prodStore.getProduct(target.dataset.id);\n  const imgHrefs = thisProduct.images.map((image) => image.href);\n  carousel.populate(thisProduct.name, imgHrefs);\n  carousel.show();\n}\n\n// add all products in prodstore to Vue model\nfunction addProdStoreToVM () {\n  prodStore.productIds().forEach((id) => {\n    prodVM.addProduct(prodStore.getVueProduct(id));\n  });\n}\n\n// accessibility: listen for 'enter' key events on images and convert\n// to click\nfunction mapEnterKeysToClickEvent (cardsParent) {\n  cardsParent.addEventListener('keydown', (e) => {\n    const elem = e.target;\n    if (e.key === 'Enter' && elem.tagName === 'IMG') {\n      elem.click();\n    }\n  });\n}\n\n// in order to detect a click on any one of the card images\n// add one event listener to the parent of the product cards\nfunction addImageClickListener (cardsParent) {\n  cardsParent.addEventListener('click', handleProductClick);\n}\n\n// respond to hiding of overlay modal\nfunction addOverlayHideListener () {\n  $('#carouselModal').on('hidden.bs.modal', () => {\n    // no cleanup needed\n  });\n}\n\n// listen for escape key, then de-focus an active image\nfunction addEscapeKeyListener () {\n  document.addEventListener('keydown', (evt) => {\n    if (evt.key !== 'Escape') { return; }\n    if ($('#carouselModal').is(':visible')) { return; }\n    if (document.activeElement) {\n      document.activeElement.blur();\n    }\n  });\n}\n\n// add all of our event listeners\nfunction addEventListeners () {\n  const cardsParent = document.getElementById('products-container');\n  addImageClickListener(cardsParent);\n  mapEnterKeysToClickEvent(cardsParent);\n  addOverlayHideListener();\n  addEscapeKeyListener();\n}\n\n// initialize the page\nfunction pageInit () {\n\n  addEventListeners();\n\n  // read in products and add to Vue model\n  prodStore.readProducts()\n    .then(result => {\n      if (result !== true) {\n        throw 'unable to read products';\n      }\n      addProdStoreToVM();\n    })\n    .catch(err => alert(err)); // TODO replace alert with modal dialog\n}\n\nfunction initPageOnWindowLoad () {\n  window.addEventListener('load', () => {\n    // install the overlay carousel\n    carousel = new OverlayCarousel({\n      thumbnailHoverOutline: '2px solid dodgerblue'\n    });\n\n    pageInit();\n  });\n}\n\ninitPageOnWindowLoad();\n\nexport default pageInit;\n","/**\n * products store for Williams-Sonoma Coding Challenge\n * @param url\n * @return {{readProducts: (function(): Promise<boolean>), getVueProduct: (function(*): {heroHref: *, name: *, id: *}), getProduct: (function(*): *), productIds: (function(): string[])}}\n * @constructor\n */\nfunction WSIProdStore (url) {\n\n  let products;\n  let jsonURL = url;\n\n  // to enable effient access to a product by id,\n  // reduce `productsRaw.groups` array\n  // to object with property names of `id`\n  const groupsToObject = (obj, group) => {\n    obj[group.id] = group;\n    return obj;\n  };\n\n  // fetch a JSON file and convert to object\n  function fetchJSON (fileURL) {\n    // console.log(`fetchJSON(\"${fileURL}\")`);\n    const fetchOptions = { method: 'GET' };\n    return fetch(fileURL, fetchOptions)\n      .then(response => {\n        return response.json();\n      })\n      .catch(err => {\n        console.error('fetchJSON fetch err:', err);\n        throw err;\n      });\n  }\n\n  /**\n   * read products from JSON file\n   * @return {Promise<boolean>}\n   */\n  function readProducts () {\n    return fetchJSON(jsonURL)\n      .then(rawData => {\n        products = rawData.groups.reduce(groupsToObject, {});\n        // console.log('readProducts products:', products);\n        return true;\n      })\n      .catch(err => {\n        console.error('readProducts err:', err);\n        return false;\n      })\n  }\n\n  /**\n   * return array of product ids\n   * @return {string[]}\n   */\n  function productIds () {\n    return Object.keys(products);\n  }\n\n  /**\n   * return a single product from store\n   * @param productId\n   * @return {Object}\n   */\n  function getProduct (productId) {\n    return products[productId];\n  }\n\n  /**\n   * return product object to be consumed by Vue\n   * @param productId\n   * @return {{heroHref: *, name: *, id: *}}\n   */\n  function getVueProduct (productId) {\n    const product = products[productId];\n    if (typeof product === 'undefined') {\n      return undefined;\n    }\n    const vueProduct = {\n      id: product.id,\n      name: product.name,\n      heroHref: product.hero.href\n    };\n    if (product.priceRange) {\n      vueProduct.priceRange = product.priceRange;\n    } else if (product.price) {\n      vueProduct.price = product.price;\n    }\n    return vueProduct;\n  }\n\n  return {\n    readProducts,\n    productIds,\n    getProduct,\n    getVueProduct\n  }\n}\n\nexport default WSIProdStore;\n","/**\n * Vue app for displaying products in cards on page\n * @param {string} vmID - id of wrapper DOM element for vue model\n * @return {*}\n */\nfunction WSIProductsVM (vmID) {\n\n  const priceLabel = {\n    regularPrice: 'Regular Price ',\n    salePrice: 'Sale Price ',\n    notOnSale: 'Price ',\n    currencySymbol: '$'\n  };\n\n  Vue.component('product-img', {\n    props: ['product'],\n    template: `\n      <img\n        v-bind:src=\"product.heroHref\"\n        v-bind:data-id=\"product.id\"\n        v-bind:alt=\"product.name\"\n        class=\"card-img-top\"\n        role=\"button\"\n        tabindex=\"0\"\n      >`\n  });\n\n  Vue.component('product-name', {\n    props: ['name'],\n    template: `\n      <p class=\"card-text\" v-html=\"name\"></p>`\n  });\n\n  Vue.component('product-pricing', {\n    props: ['displayprice'],\n    template: `\n      <p class=\"card-text\" v-html=\"displayprice\"></p>`\n  })\n\n  return new Vue({\n    el: `#${vmID}`,\n    data: {\n      products: [],\n      overlay: {}\n    },\n\n    methods: {\n\n      addProduct: function (product) {\n        this.products.push(product);\n        return this.products.length;\n      },\n\n      displayPrice: function (product) {\n\n        const [regular, selling] = product.priceRange ?\n          [product.priceRange.regular, product.priceRange.selling] :\n          [product.price.regular, product.price.selling];\n\n        const isOnSale = (reg, sale) => {\n          return (typeof reg === 'number')\n            ? reg !== sale\n            : (reg.low !== sale.low || reg.high !== sale.high);\n        };\n\n        const priceString = (price) => {\n          return (typeof price === 'number')\n            ? `${priceLabel.currencySymbol}${price}`\n            : `${priceLabel.currencySymbol}${price.low} - $${price.high}`;\n        };\n\n        if (isOnSale(regular, selling)) {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.regularPrice}\n            ${priceString(regular)}</span><br/>\n            <span class=\"wsi-price wsi-sale\">${priceLabel.salePrice}\n            ${priceString(selling)}</span>`\n          );\n        } else {\n          return (\n            `<span class=\"wsi-price\">${priceLabel.notOnSale}\n            ${priceString(regular)}</span>`\n          );\n        }\n      }\n    }\n  });\n}\n\nexport default WSIProductsVM;\n\n"],"sourceRoot":""}